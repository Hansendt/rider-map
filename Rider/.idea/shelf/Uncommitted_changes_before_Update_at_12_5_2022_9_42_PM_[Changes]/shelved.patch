Index: app/src/main/res/layout/activity_signup.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\"\r\n    android:background=\"@color/colorPrimary\"\r\n    tools:context=\".Login\">\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"15dp\"\r\n        android:layout_marginTop=\"50dp\">\r\n\r\n        <ImageButton\r\n            android:id=\"@+id/btnBacktoWelcome\"\r\n            android:layout_width=\"50dp\"\r\n            android:layout_height=\"50dp\"\r\n            android:background=\"@color/colorPrimary\"\r\n            android:src=\"@drawable/back\" />\r\n\r\n        <TextView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_vertical\"\r\n            android:textColor=\"@color/white\"\r\n            android:textSize=\"27sp\"\r\n            android:textStyle=\"bold\"\r\n            android:text=\"Rider\"/>\r\n\r\n\r\n    </LinearLayout>\r\n\r\n    <TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:textAlignment=\"center\"\r\n        android:layout_marginTop=\"40dp\"\r\n        android:textColor=\"@color/white\"\r\n        android:textSize=\"33sp\"\r\n        android:textStyle=\"bold\"\r\n        android:text=\"Sign Up\"/>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:layout_marginStart=\"50dp\"\r\n        android:layout_marginEnd=\"62dp\"\r\n        android:orientation=\"horizontal\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"175dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <com.google.android.material.textfield.TextInputLayout\r\n                style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n                android:layout_width=\"160dp\"\r\n                android:layout_height=\"55dp\"\r\n                app:boxBackgroundColor=\"@color/colorPrimary\"\r\n                android:textColorHint=\"@color/white\"\r\n                app:boxStrokeColor=\"@color/white\">\r\n\r\n                <com.google.android.material.textfield.TextInputEditText\r\n                    android:id=\"@+id/signFname\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:hint=\"First Name\"\r\n                    android:textColor=\"@color/white\"\r\n                    android:textSize=\"13sp\"/>\r\n\r\n            </com.google.android.material.textfield.TextInputLayout>\r\n\r\n            <com.google.android.material.textfield.TextInputLayout\r\n                style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n                android:layout_width=\"160dp\"\r\n                android:layout_height=\"55dp\"\r\n                android:layout_marginTop=\"13dp\"\r\n                app:boxBackgroundColor=\"@color/colorPrimary\"\r\n                android:textColorHint=\"@color/white\"\r\n                app:boxStrokeColor=\"@color/white\">\r\n\r\n                <com.google.android.material.textfield.TextInputEditText\r\n                    android:id=\"@+id/signLname\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:hint=\"Last Name\"\r\n                    android:textColor=\"@color/white\"\r\n                    android:textSize=\"13sp\"/>\r\n\r\n            </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"120dp\"\r\n            android:layout_height=\"120dp\">\r\n\r\n            <Button\r\n                android:layout_width=\"120dp\"\r\n                android:layout_height=\"120dp\"\r\n                android:backgroundTint=\"@color/white\"\r\n                android:text=\"+ Photo\"\r\n                android:textColor=\"@color/black\" />\r\n\r\n\r\n        </LinearLayout>\r\n\r\n    </LinearLayout>\r\n\r\n    <com.google.android.material.textfield.TextInputLayout\r\n        style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n        android:layout_width=\"300dp\"\r\n        android:layout_height=\"55dp\"\r\n        android:layout_marginTop=\"12dp\"\r\n        android:layout_marginStart=\"50dp\"\r\n        app:boxBackgroundColor=\"@color/colorPrimary\"\r\n        android:textColorHint=\"@color/white\"\r\n        app:boxStrokeColor=\"@color/white\">\r\n\r\n        <com.google.android.material.textfield.TextInputEditText\r\n            android:id=\"@+id/signEmail\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Email\"\r\n            android:textColor=\"@color/white\"\r\n            android:textSize=\"13sp\"/>\r\n\r\n    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n    <com.google.android.material.textfield.TextInputLayout\r\n        style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n        android:layout_width=\"300dp\"\r\n        android:layout_height=\"55dp\"\r\n        android:layout_marginTop=\"13dp\"\r\n        android:layout_marginStart=\"50dp\"\r\n        app:boxBackgroundColor=\"@color/colorPrimary\"\r\n        android:textColorHint=\"@color/white\"\r\n        app:boxStrokeColor=\"@color/white\">\r\n\r\n        <com.google.android.material.textfield.TextInputEditText\r\n            android:id=\"@+id/signUsername\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Username\"\r\n            android:textColor=\"@color/white\"\r\n            android:textSize=\"13sp\"/>\r\n\r\n    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n    <com.google.android.material.textfield.TextInputLayout\r\n        style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n        android:layout_width=\"300dp\"\r\n        android:layout_height=\"55dp\"\r\n        android:layout_marginTop=\"13dp\"\r\n        android:layout_marginStart=\"50dp\"\r\n        app:boxBackgroundColor=\"@color/colorPrimary\"\r\n        android:textColorHint=\"@color/white\"\r\n        app:boxStrokeColor=\"@color/white\">\r\n\r\n        <com.google.android.material.textfield.TextInputEditText\r\n            android:id=\"@+id/signPass\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Password\"\r\n            android:inputType=\"textPassword\"\r\n            android:textColor=\"@color/white\"\r\n            android:textSize=\"13sp\"/>\r\n\r\n    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n    <com.google.android.material.textfield.TextInputLayout\r\n        style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n        android:layout_width=\"300dp\"\r\n        android:layout_height=\"55dp\"\r\n        android:layout_marginTop=\"13dp\"\r\n        android:layout_marginStart=\"50dp\"\r\n        app:boxBackgroundColor=\"@color/colorPrimary\"\r\n        android:textColorHint=\"@color/white\"\r\n        app:boxStrokeColor=\"@color/white\">\r\n\r\n        <com.google.android.material.textfield.TextInputEditText\r\n            android:id=\"@+id/signPassConfirm\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Confirm Password\"\r\n            android:inputType=\"textPassword\"\r\n            android:textColor=\"@color/white\"\r\n            android:textSize=\"13sp\"/>\r\n\r\n    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n\r\n\r\n\r\n\r\n    <TextView\r\n        android:id=\"@+id/goLogin\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_gravity=\"center\"\r\n        android:layout_marginTop=\"25dp\"\r\n        android:textColor=\"@color/white\"\r\n        android:text=\"Already have an account? Login!\"/>\r\n\r\n    <Button\r\n        android:id=\"@+id/btnSignupConfirm\"\r\n        android:layout_width=\"300dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"10dp\"\r\n        android:layout_gravity=\"center\"\r\n        android:backgroundTint=\"@color/white\"\r\n        android:text=\"Sign Up\"\r\n        android:textColor=\"@color/black\" />\r\n\r\n\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_signup.xml b/app/src/main/res/layout/activity_signup.xml
--- a/app/src/main/res/layout/activity_signup.xml	(revision 6349935138b695d51ec6aac969e84f03570b394e)
+++ b/app/src/main/res/layout/activity_signup.xml	(date 1670248483175)
@@ -143,10 +143,10 @@
         app:boxStrokeColor="@color/white">
 
         <com.google.android.material.textfield.TextInputEditText
-            android:id="@+id/signUsername"
+            android:id="@+id/signEmailConfirm"
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
-            android:hint="Username"
+            android:hint="Confirm Email"
             android:textColor="@color/white"
             android:textSize="13sp"/>
 
Index: app/src/main/java/id/ac/umn/rider/Login.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package id.ac.umn.rider;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\npublic class Login extends AppCompatActivity {\r\n\r\n    DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReferenceFromUrl(\"https://rider-6018c-default-rtdb.firebaseio.com/\");\r\n\r\n    private ImageButton btnBack;\r\n    private EditText inUsername, inPass;\r\n    private TextView goSignup;\r\n    private Button btnLogin;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        getSupportActionBar().hide();\r\n        setContentView(R.layout.activity_login);\r\n\r\n        btnBack = findViewById(R.id.btnBack);\r\n        inUsername = findViewById(R.id.inUsername);\r\n        inPass = findViewById(R.id.inPass);\r\n        goSignup = findViewById(R.id.goSignup);\r\n        btnLogin = findViewById(R.id.btnLogin);\r\n\r\n        btnBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent backWelcome = new Intent(Login.this, Welcome.class);\r\n                startActivity(backWelcome);\r\n            }\r\n        });\r\n\r\n        goSignup.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent inSignup = new Intent(Login.this, Signup.class);\r\n                startActivity(inSignup);\r\n            }\r\n        });\r\n\r\n        btnLogin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                final String username = inUsername.getText().toString();\r\n                final String pass = inPass.getText().toString();\r\n\r\n                if (username.isEmpty() || pass.isEmpty()) {\r\n                    Toast.makeText(Login.this, \"Please fill all the fields\", Toast.LENGTH_SHORT).show();\r\n                } else{\r\n                    databaseReference.child(\"Users\").addListenerForSingleValueEvent(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                            if (snapshot.child(username).exists()) {\r\n                                final String getPass = snapshot.child(username).child(\"Password\").getValue(String.class);\r\n                                if(getPass.equals(pass)){\r\n                                    Intent inHome = new Intent(Login.this, Home.class);\r\n                                    inHome.putExtra(\"username\", username);\r\n                                    startActivity(inHome);\r\n                                    finish();\r\n                                } else {\r\n                                    Toast.makeText(Login.this, \"Wrong password\", Toast.LENGTH_SHORT).show();\r\n                                }\r\n                            }\r\n                            else {\r\n                                Toast.makeText(Login.this, \"Email not found\", Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        }\r\n\r\n\r\n                        @Override\r\n                        public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/id/ac/umn/rider/Login.java b/app/src/main/java/id/ac/umn/rider/Login.java
--- a/app/src/main/java/id/ac/umn/rider/Login.java	(revision 6349935138b695d51ec6aac969e84f03570b394e)
+++ b/app/src/main/java/id/ac/umn/rider/Login.java	(date 1670251035756)
@@ -3,6 +3,7 @@
 import androidx.annotation.NonNull;
 import androidx.appcompat.app.AppCompatActivity;
 
+import android.app.ProgressDialog;
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.View;
@@ -12,6 +13,11 @@
 import android.widget.TextView;
 import android.widget.Toast;
 
+import com.google.android.gms.tasks.OnCompleteListener;
+import com.google.android.gms.tasks.Task;
+import com.google.firebase.auth.AuthResult;
+import com.google.firebase.auth.FirebaseAuth;
+import com.google.firebase.auth.FirebaseUser;
 import com.google.firebase.database.DataSnapshot;
 import com.google.firebase.database.DatabaseError;
 import com.google.firebase.database.DatabaseReference;
@@ -23,10 +29,13 @@
     DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReferenceFromUrl("https://rider-6018c-default-rtdb.firebaseio.com/");
 
     private ImageButton btnBack;
-    private EditText inUsername, inPass;
+    private EditText inEmail, inPass;
     private TextView goSignup;
     private Button btnLogin;
 
+    private FirebaseAuth mAuth;
+    private ProgressDialog progressDialog;
+
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
@@ -34,11 +43,17 @@
         setContentView(R.layout.activity_login);
 
         btnBack = findViewById(R.id.btnBack);
-        inUsername = findViewById(R.id.inUsername);
+        inEmail = findViewById(R.id.inEmail);
         inPass = findViewById(R.id.inPass);
         goSignup = findViewById(R.id.goSignup);
         btnLogin = findViewById(R.id.btnLogin);
 
+        mAuth = FirebaseAuth.getInstance();
+        progressDialog = new ProgressDialog(Login.this);
+        progressDialog.setTitle("Please Wait");
+        progressDialog.setMessage("We are logging you in");
+        progressDialog.setCancelable(false);
+
         btnBack.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View view) {
@@ -58,39 +73,47 @@
         btnLogin.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View view) {
-                final String username = inUsername.getText().toString();
+                final String email = inEmail.getText().toString();
                 final String pass = inPass.getText().toString();
 
-                if (username.isEmpty() || pass.isEmpty()) {
+                if (email.isEmpty() || pass.isEmpty()) {
                     Toast.makeText(Login.this, "Please fill all the fields", Toast.LENGTH_SHORT).show();
                 } else{
-                    databaseReference.child("Users").addListenerForSingleValueEvent(new ValueEventListener() {
-                        @Override
-                        public void onDataChange(@NonNull DataSnapshot snapshot) {
-                            if (snapshot.child(username).exists()) {
-                                final String getPass = snapshot.child(username).child("Password").getValue(String.class);
-                                if(getPass.equals(pass)){
-                                    Intent inHome = new Intent(Login.this, Home.class);
-                                    inHome.putExtra("username", username);
-                                    startActivity(inHome);
-                                    finish();
-                                } else {
-                                    Toast.makeText(Login.this, "Wrong password", Toast.LENGTH_SHORT).show();
-                                }
-                            }
-                            else {
-                                Toast.makeText(Login.this, "Email not found", Toast.LENGTH_SHORT).show();
-                            }
-                        }
+                    login(email, pass);
+                }
+            }
+        });
+    }
+
+    private void login(String email, String password){
+        mAuth.signInWithEmailAndPassword(email, password).addOnCompleteListener(new OnCompleteListener<AuthResult>() {
+            @Override
+            public void onComplete(@NonNull Task<AuthResult> task) {
+                if (task.isSuccessful() && task.getResult() != null){
+                    if(task.getResult() != null){
+                        reload();
+                    }
+                    else{
+                        Toast.makeText(Login.this, "Login Failed", Toast.LENGTH_SHORT).show();
+                    }
+                }else{
+                    Toast.makeText(Login.this, "Login Failed", Toast.LENGTH_SHORT).show();
+                }
+            }
+        });
+    }
 
+    private void reload(){
+        startActivity(new Intent(getApplicationContext(), Home.class));
+    }
 
-                        @Override
-                        public void onCancelled(@NonNull DatabaseError error) {
-
-                        }
-                    });
-                }
-            }
-        });
+    @Override
+    public void onStart() {
+        super.onStart();
+        // Check if user is signed in (non-null) and update UI accordingly.
+        FirebaseUser currentUser = mAuth.getCurrentUser();
+        if(currentUser != null){
+            reload();
+        }
     }
 }
\ No newline at end of file
Index: app/src/main/java/id/ac/umn/rider/Signup.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package id.ac.umn.rider;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\npublic class Signup extends AppCompatActivity {\r\n\r\n    DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReferenceFromUrl(\"https://rider-6018c-default-rtdb.firebaseio.com/\");\r\n\r\n    private ImageButton btnBacktoWelcome;\r\n    private Button btnSignupConfirm;\r\n    EditText signFname, signLname, signEmail, signUsername, signPass, signPassConfirm;\r\n    private TextView goLogin;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        getSupportActionBar().hide();\r\n        setContentView(R.layout.activity_signup);\r\n\r\n        signFname = findViewById(R.id.signFname);\r\n        signLname = findViewById(R.id.signLname);\r\n        signEmail = findViewById(R.id.signEmail);\r\n        signUsername = findViewById(R.id.signUsername);\r\n        signPass = findViewById(R.id.signPass);\r\n        signPassConfirm = findViewById(R.id.signPassConfirm);\r\n\r\n        btnBacktoWelcome = findViewById(R.id.btnBacktoWelcome);\r\n        btnSignupConfirm = findViewById(R.id.btnSignupConfirm);\r\n        goLogin = findViewById(R.id.goLogin);\r\n\r\n\r\n        btnBacktoWelcome.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent backWelcome2 = new Intent(Signup.this, Welcome.class);\r\n                startActivity(backWelcome2);\r\n            }\r\n        });\r\n\r\n        btnSignupConfirm.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                final String fname = signFname.getText().toString();\r\n                final String lname = signLname.getText().toString();\r\n                final String email = signEmail.getText().toString();\r\n                final String username = signUsername.getText().toString();\r\n                final String pass = signPass.getText().toString();\r\n                final String passConfirm = signPassConfirm.getText().toString();\r\n\r\n                if (fname.isEmpty() || lname.isEmpty() || email.isEmpty() || username.isEmpty() || pass.isEmpty() || passConfirm.isEmpty()){\r\n                    Toast.makeText(Signup.this, \"Please fill all the fields\", Toast.LENGTH_SHORT).show();\r\n                }\r\n                else if (!pass.equals(passConfirm)){\r\n                    Toast.makeText(Signup.this, \"Password doesn't match\", Toast.LENGTH_SHORT).show();\r\n                }\r\n                else {\r\n                    databaseReference.child(\"Users\").addListenerForSingleValueEvent(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                            if (snapshot.child(username).exists()){\r\n                                Toast.makeText(Signup.this, \"Email already exists\", Toast.LENGTH_SHORT).show();\r\n                            }\r\n                            else {\r\n                                //send data to firebase\r\n                                databaseReference.child(\"Users\").child(username).child(\"First Name\").setValue(fname);\r\n                                databaseReference.child(\"Users\").child(username).child(\"Last Name\").setValue(lname);\r\n                                databaseReference.child(\"Users\").child(username).child(\"Email\").setValue(email);\r\n                                databaseReference.child(\"Users\").child(username).child(\"Password\").setValue(pass);\r\n                                databaseReference.child(\"Users\").child(username).child(\"isBikeCreated\").setValue(\"false\");\r\n\r\n                                Toast.makeText(Signup.this, \"Sign Up Success\", Toast.LENGTH_SHORT).show();\r\n                                finish();\r\n                            }\r\n                        }\r\n\r\n                        @Override\r\n                        public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                        }\r\n                    });\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n        goLogin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent inLogin = new Intent(Signup.this, Login.class);\r\n                startActivity(inLogin);\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/id/ac/umn/rider/Signup.java b/app/src/main/java/id/ac/umn/rider/Signup.java
--- a/app/src/main/java/id/ac/umn/rider/Signup.java	(revision 6349935138b695d51ec6aac969e84f03570b394e)
+++ b/app/src/main/java/id/ac/umn/rider/Signup.java	(date 1670250173930)
@@ -3,6 +3,7 @@
 import androidx.annotation.NonNull;
 import androidx.appcompat.app.AppCompatActivity;
 
+import android.app.ProgressDialog;
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.View;
@@ -12,6 +13,12 @@
 import android.widget.TextView;
 import android.widget.Toast;
 
+import com.google.android.gms.tasks.OnCompleteListener;
+import com.google.android.gms.tasks.Task;
+import com.google.firebase.auth.AuthResult;
+import com.google.firebase.auth.FirebaseAuth;
+import com.google.firebase.auth.FirebaseUser;
+import com.google.firebase.auth.UserProfileChangeRequest;
 import com.google.firebase.database.DataSnapshot;
 import com.google.firebase.database.DatabaseError;
 import com.google.firebase.database.DatabaseReference;
@@ -24,8 +31,10 @@
 
     private ImageButton btnBacktoWelcome;
     private Button btnSignupConfirm;
-    EditText signFname, signLname, signEmail, signUsername, signPass, signPassConfirm;
+    EditText signFname, signLname, signEmail, signEmailConfirm, signPass, signPassConfirm;
     private TextView goLogin;
+    private ProgressDialog progressDialog;
+    private FirebaseAuth mAuth;
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
@@ -36,7 +45,7 @@
         signFname = findViewById(R.id.signFname);
         signLname = findViewById(R.id.signLname);
         signEmail = findViewById(R.id.signEmail);
-        signUsername = findViewById(R.id.signUsername);
+        signEmailConfirm = findViewById(R.id.signEmailConfirm);
         signPass = findViewById(R.id.signPass);
         signPassConfirm = findViewById(R.id.signPassConfirm);
 
@@ -44,6 +53,12 @@
         btnSignupConfirm = findViewById(R.id.btnSignupConfirm);
         goLogin = findViewById(R.id.goLogin);
 
+        mAuth = FirebaseAuth.getInstance();
+        progressDialog = new ProgressDialog(Signup.this);
+        progressDialog.setTitle("Please Wait");
+        progressDialog.setMessage("We are creating your account");
+        progressDialog.setCancelable(false);
+
 
         btnBacktoWelcome.setOnClickListener(new View.OnClickListener() {
             @Override
@@ -59,41 +74,45 @@
                 final String fname = signFname.getText().toString();
                 final String lname = signLname.getText().toString();
                 final String email = signEmail.getText().toString();
-                final String username = signUsername.getText().toString();
+                final String emailConfirm = signEmailConfirm.getText().toString();
                 final String pass = signPass.getText().toString();
                 final String passConfirm = signPassConfirm.getText().toString();
 
-                if (fname.isEmpty() || lname.isEmpty() || email.isEmpty() || username.isEmpty() || pass.isEmpty() || passConfirm.isEmpty()){
+                if (fname.isEmpty() || lname.isEmpty() || email.isEmpty() || emailConfirm.isEmpty() || pass.isEmpty() || passConfirm.isEmpty()){
                     Toast.makeText(Signup.this, "Please fill all the fields", Toast.LENGTH_SHORT).show();
                 }
+                else if (!email.equals(emailConfirm)){
+                    Toast.makeText(Signup.this, "Email doesn't match", Toast.LENGTH_SHORT).show();
+                }
                 else if (!pass.equals(passConfirm)){
                     Toast.makeText(Signup.this, "Password doesn't match", Toast.LENGTH_SHORT).show();
                 }
                 else {
-                    databaseReference.child("Users").addListenerForSingleValueEvent(new ValueEventListener() {
-                        @Override
-                        public void onDataChange(@NonNull DataSnapshot snapshot) {
-                            if (snapshot.child(username).exists()){
-                                Toast.makeText(Signup.this, "Email already exists", Toast.LENGTH_SHORT).show();
-                            }
-                            else {
-                                //send data to firebase
-                                databaseReference.child("Users").child(username).child("First Name").setValue(fname);
-                                databaseReference.child("Users").child(username).child("Last Name").setValue(lname);
-                                databaseReference.child("Users").child(username).child("Email").setValue(email);
-                                databaseReference.child("Users").child(username).child("Password").setValue(pass);
-                                databaseReference.child("Users").child(username).child("isBikeCreated").setValue("false");
-
-                                Toast.makeText(Signup.this, "Sign Up Success", Toast.LENGTH_SHORT).show();
-                                finish();
-                            }
-                        }
-
-                        @Override
-                        public void onCancelled(@NonNull DatabaseError error) {
-
-                        }
-                    });
+                    signUp(fname, lname, email, pass);
+//                    databaseReference.child("Users").addListenerForSingleValueEvent(new ValueEventListener() {
+//                        @Override
+//                        public void onDataChange(@NonNull DataSnapshot snapshot) {
+//                            if (snapshot.child(username).exists()){
+//                                Toast.makeText(Signup.this, "Email already exists", Toast.LENGTH_SHORT).show();
+//                            }
+//                            else {
+//                                //send data to firebase
+//                                databaseReference.child("Users").child(username).child("First Name").setValue(fname);
+//                                databaseReference.child("Users").child(username).child("Last Name").setValue(lname);
+//                                databaseReference.child("Users").child(username).child("Email").setValue(email);
+//                                databaseReference.child("Users").child(username).child("Password").setValue(pass);
+//                                databaseReference.child("Users").child(username).child("isBikeCreated").setValue("false");
+//
+//                                Toast.makeText(Signup.this, "Sign Up Success", Toast.LENGTH_SHORT).show();
+//                                finish();
+//                            }
+//                        }
+//
+//                        @Override
+//                        public void onCancelled(@NonNull DatabaseError error) {
+//
+//                        }
+//                    });
 
                 }
             }
@@ -106,7 +125,59 @@
                 startActivity(inLogin);
             }
         });
+    }
+
+    private void signUp(String fname, String lname, String email, String password){
+        progressDialog.show();
+        mAuth.createUserWithEmailAndPassword(email, password).addOnCompleteListener(new OnCompleteListener<AuthResult>() {
+            @Override
+            public void onComplete(@NonNull Task<AuthResult> task) {
+                if (task.isSuccessful() && task.getResult() != null){
+                    FirebaseUser user = task.getResult().getUser();
+                    if (user != null){
+                        UserProfileChangeRequest request = new UserProfileChangeRequest.Builder()
+                                .setDisplayName(fname + " " + lname)
+                                .build();
 
+                        user.updateProfile(request).addOnCompleteListener(new OnCompleteListener<Void>() {
+                            @Override
+                            public void onComplete(@NonNull Task<Void> task) {
+                                reload();
+                            }
+                        });
+                    } else{
+                        Toast.makeText(Signup.this, "Sign Up Failed", Toast.LENGTH_SHORT).show();
+                    }
 
+
+                    String uid = user.getUid();
+                    databaseReference.child("Users").child(uid).child("First Name").setValue(fname);
+                    databaseReference.child("Users").child(uid).child("Last Name").setValue(lname);
+                    databaseReference.child("Users").child(uid).child("Email").setValue(email);
+                    databaseReference.child("Users").child(uid).child("Password").setValue(password);
+                    databaseReference.child("Users").child(uid).child("isBikeCreated").setValue("false");
+                    Toast.makeText(Signup.this, "Sign Up Success", Toast.LENGTH_SHORT).show();
+                    finish();
+                }
+                else {
+                    Toast.makeText(getApplicationContext(), task.getException().getLocalizedMessage(), Toast.LENGTH_SHORT).show();
+                }
+            }
+        });
+
+    }
+
+    private void reload(){
+        startActivity(new Intent(getApplicationContext(), Home.class));
+    }
+
+    @Override
+    public void onStart() {
+        super.onStart();
+        // Check if user is signed in (non-null) and update UI accordingly.
+        FirebaseUser currentUser = mAuth.getCurrentUser();
+        if(currentUser != null){
+            reload();
+        }
     }
 }
\ No newline at end of file
Index: app/src/main/res/layout/activity_login.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\"\r\n    android:background=\"@color/colorPrimary\"\r\n    tools:context=\".Login\">\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"15dp\"\r\n        android:layout_marginTop=\"50dp\">\r\n\r\n        <ImageButton\r\n            android:id=\"@+id/btnBack\"\r\n            android:layout_width=\"50dp\"\r\n            android:layout_height=\"50dp\"\r\n            android:background=\"@color/colorPrimary\"\r\n            android:src=\"@drawable/back\" />\r\n\r\n        <TextView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_vertical\"\r\n            android:textColor=\"@color/white\"\r\n            android:textSize=\"27sp\"\r\n            android:textStyle=\"bold\"\r\n            android:text=\"Rider\"/>\r\n\r\n\r\n    </LinearLayout>\r\n\r\n    <TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:textAlignment=\"center\"\r\n        android:layout_marginTop=\"100dp\"\r\n        android:textColor=\"@color/white\"\r\n        android:textSize=\"33sp\"\r\n        android:textStyle=\"bold\"\r\n        android:text=\"Login\"/>\r\n\r\n    <com.google.android.material.textfield.TextInputLayout\r\n        style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"53dp\"\r\n        android:layout_marginTop=\"50dp\"\r\n        android:layout_marginEnd=\"60dp\"\r\n        app:boxBackgroundColor=\"@color/colorPrimary\"\r\n        android:textColorHint=\"@color/white\"\r\n        app:boxStrokeColor=\"@color/white\">\r\n\r\n        <com.google.android.material.textfield.TextInputEditText\r\n            android:id=\"@+id/inUsername\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"username\"\r\n            android:textColor=\"@color/white\"/>\r\n\r\n    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n    <com.google.android.material.textfield.TextInputLayout\r\n        style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"53dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:layout_marginEnd=\"60dp\"\r\n        app:boxBackgroundColor=\"@color/colorPrimary\"\r\n        android:textColorHint=\"@color/white\"\r\n        app:boxStrokeColor=\"@color/white\">\r\n\r\n        <com.google.android.material.textfield.TextInputEditText\r\n            android:id=\"@+id/inPass\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"password\"\r\n            android:inputType=\"textPassword\"\r\n            android:textColor=\"@color/white\"/>\r\n\r\n    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n    <TextView\r\n        android:id=\"@+id/goSignup\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_gravity=\"center\"\r\n        android:layout_marginTop=\"111dp\"\r\n        android:textColor=\"@color/white\"\r\n        android:text=\"Dont't have an account yet? Sign Up!\"/>\r\n\r\n    <Button\r\n        android:id=\"@+id/btnLogin\"\r\n        android:layout_width=\"300dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"25dp\"\r\n        android:layout_gravity=\"center\"\r\n        android:backgroundTint=\"@color/white\"\r\n        android:text=\"Log In\"\r\n        android:textColor=\"@color/black\" />\r\n\r\n\r\n\r\n\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_login.xml b/app/src/main/res/layout/activity_login.xml
--- a/app/src/main/res/layout/activity_login.xml	(revision 6349935138b695d51ec6aac969e84f03570b394e)
+++ b/app/src/main/res/layout/activity_login.xml	(date 1670250889149)
@@ -56,10 +56,10 @@
         app:boxStrokeColor="@color/white">
 
         <com.google.android.material.textfield.TextInputEditText
-            android:id="@+id/inUsername"
+            android:id="@+id/inEmail"
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
-            android:hint="username"
+            android:hint="email"
             android:textColor="@color/white"/>
 
     </com.google.android.material.textfield.TextInputLayout>
Index: app/src/main/java/id/ac/umn/rider/BikeCreatedFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package id.ac.umn.rider;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\n\r\npublic class BikeCreatedFragment extends Fragment {\r\n\r\n    View view;\r\n\r\n    private String Name;\r\n    private String Brand;\r\n    private String Model;\r\n    private String plate;\r\n    private String cc;\r\n    private String year;\r\n\r\n\r\n    private TextView bikeName;\r\n    private TextView bikeBrand;\r\n    private TextView bikeModel;\r\n    private TextView plateNumber;\r\n    private TextView cyclinderCapacity;\r\n    private TextView yearOfManufacture;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n\r\n        view = inflater.inflate(R.layout.fragment_bike_created, container, false);\r\n\r\n        bikeName = view.findViewById(R.id.bikeName);\r\n        bikeBrand = view.findViewById(R.id.bikeBrand);\r\n        bikeModel = view.findViewById(R.id.bikeModel);\r\n        plateNumber = view.findViewById(R.id.bikePlate);\r\n        cyclinderCapacity = view.findViewById(R.id.bikeCC);\r\n        yearOfManufacture = view.findViewById(R.id.bikeYear);\r\n\r\n        Bundle bundle = getArguments();\r\n\r\n        if (bundle != null) {\r\n            Name = bundle.getString(\"vehicleName\");\r\n            Brand = bundle.getString(\"vehicleBrand\");\r\n            Model = bundle.getString(\"vehicleModel\");\r\n            plate = bundle.getString(\"vehiclePlate\");\r\n            cc = bundle.getString(\"cylinderCapacity\");\r\n            year = bundle.getString(\"vehicleYear\");\r\n        }\r\n\r\n        bikeName.setText(Name);\r\n        bikeBrand.setText(Brand);\r\n        bikeModel.setText(Model);\r\n        plateNumber.setText(plate);\r\n        cyclinderCapacity.setText(cc + \" cc\");\r\n        yearOfManufacture.setText(year);\r\n\r\n        return view;\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/id/ac/umn/rider/BikeCreatedFragment.java b/app/src/main/java/id/ac/umn/rider/BikeCreatedFragment.java
--- a/app/src/main/java/id/ac/umn/rider/BikeCreatedFragment.java	(revision 6349935138b695d51ec6aac969e84f03570b394e)
+++ b/app/src/main/java/id/ac/umn/rider/BikeCreatedFragment.java	(date 1670175180842)
@@ -20,7 +20,6 @@
     private String cc;
     private String year;
 
-
     private TextView bikeName;
     private TextView bikeBrand;
     private TextView bikeModel;
Index: .idea/gradle.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"GRADLE\" />\r\n        <option name=\"distributionType\" value=\"DEFAULT_WRAPPED\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/gradle.xml b/.idea/gradle.xml
--- a/.idea/gradle.xml	(revision 6349935138b695d51ec6aac969e84f03570b394e)
+++ b/.idea/gradle.xml	(date 1670247428738)
@@ -1,5 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <project version="4">
+  <component name="GradleMigrationSettings" migrationVersion="1" />
   <component name="GradleSettings">
     <option name="linkedExternalProjectsSettings">
       <GradleProjectSettings>
